<!DOCTYPE html>
<html>
<head>
    <title>YouTube Video Views Comparison</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <h1>YouTube Video Views Comparison</h1>
    <h3>Fixed Video: Jhoome Jo Pathan (YxWlaYCA8MU)</h3>
    <h3>Second Video ID: <span id="secondVideoId"></span></h3>
    <input type="text" id="newVideoId" placeholder="Enter new video ID">
    <button onclick="updateVideoId()">Update Second Video ID</button>
    <table border="1">
        <thead>
            <tr>
                <th>Hour</th>
                <th>Jhoome Jo Pathan Views</th>
                <th>Second Video Views</th>
                <th>Difference</th>
            </tr>
        </thead>
        <tbody id="comparisonTable"></tbody>
    </table>

    <script>
        async function loadComparison() {
            const response = await axios.get("/compare_views");
            const data = response.data;
            const tableBody = document.getElementById("comparisonTable");
            tableBody.innerHTML = "";
            data.forEach(row => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${row.hour}</td>
                    <td>${row.fixed_video_views}</td>
                    <td>${row.second_video_views}</td>
                    <td>${row.difference}</td>
                `;
                tableBody.appendChild(tr);
            });
        }

        async function updateVideoId() {
            const newVideoId = document.getElementById("newVideoId").value;
            await axios.post("/update_video_id", { video_id: newVideoId });
            document.getElementById("secondVideoId").innerText = newVideoId;
            loadComparison();
        }

        // Load comparison data on page load
        loadComparison();
    </script>
</body>
</html>
